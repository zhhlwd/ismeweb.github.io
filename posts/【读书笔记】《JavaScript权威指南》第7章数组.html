<!DOCTYPE html>
<html lang="zh-CN">
  <head>
    <meta charset="utf-8" />
    <meta
      name="viewport"
      content="width=device-width, initial-scale=1, maximum-scale=1, user-scalable=no, minimal-ui"
    />
    <title>【读书笔记】《JavaScript权威指南》第7章数组 | zhhlwd</title>
    <meta name="description" content="三人行，必有我师焉，择其善者而从之，其不善者而改之。" />
    <meta property="og:type" content="website" />
    <meta property="og:title" content="【读书笔记】《JavaScript权威指南》第7章数组 | zhhlwd" />
    <meta property="og:site_name" content="【读书笔记】《JavaScript权威指南》第7章数组 | zhhlwd" />
    <meta property="og:locale" content="zh-CN" />
    <meta name="twitter:card" content="summary" />
    <meta name="twitter:title" content="【读书笔记】《JavaScript权威指南》第7章数组 | zhhlwd" />
    <link rel="shortcut icon" href="/favicon.ico">
    
    <link rel="preload" href="/assets/css/0.styles.068dd2cd.css" as="style"><link rel="preload" href="/assets/js/app.39e00e98.js" as="script"><link rel="preload" href="/assets/js/1.c0224360.js" as="script"><link rel="preload" href="/assets/js/15.f0ca96b2.js" as="script"><link rel="preload" href="/assets/js/5.b07737de.js" as="script"><link rel="preload" href="/assets/js/7.9893d61a.js" as="script"><link rel="preload" href="/assets/js/10.9c509957.js" as="script"><link rel="preload" href="/assets/js/6.57699fa9.js" as="script"><link rel="preload" href="/assets/js/60.0babdfb8.js" as="script"><link rel="preload" href="/assets/js/14.0e97f0ce.js" as="script"><link rel="preload" href="/assets/js/16.9fb85302.js" as="script"><link rel="prefetch" href="/assets/js/11.4d3e3171.js"><link rel="prefetch" href="/assets/js/12.00842133.js"><link rel="prefetch" href="/assets/js/13.3ac04011.js"><link rel="prefetch" href="/assets/js/17.427877de.js"><link rel="prefetch" href="/assets/js/18.9fb398fc.js"><link rel="prefetch" href="/assets/js/19.feb0126e.js"><link rel="prefetch" href="/assets/js/20.13a93009.js"><link rel="prefetch" href="/assets/js/21.58f50a10.js"><link rel="prefetch" href="/assets/js/22.c63d4380.js"><link rel="prefetch" href="/assets/js/23.18289c78.js"><link rel="prefetch" href="/assets/js/24.c1a9de78.js"><link rel="prefetch" href="/assets/js/25.0bd81385.js"><link rel="prefetch" href="/assets/js/26.16680b9b.js"><link rel="prefetch" href="/assets/js/27.6cffb597.js"><link rel="prefetch" href="/assets/js/28.6322d617.js"><link rel="prefetch" href="/assets/js/29.988d048b.js"><link rel="prefetch" href="/assets/js/30.86340671.js"><link rel="prefetch" href="/assets/js/31.3920b019.js"><link rel="prefetch" href="/assets/js/32.043d59c3.js"><link rel="prefetch" href="/assets/js/33.179b9e0e.js"><link rel="prefetch" href="/assets/js/34.d62c08ea.js"><link rel="prefetch" href="/assets/js/35.5d1effb7.js"><link rel="prefetch" href="/assets/js/36.8f937390.js"><link rel="prefetch" href="/assets/js/37.d4c78315.js"><link rel="prefetch" href="/assets/js/38.6d9e9af7.js"><link rel="prefetch" href="/assets/js/39.c0d6b845.js"><link rel="prefetch" href="/assets/js/4.852cc3fd.js"><link rel="prefetch" href="/assets/js/40.0dd1da3d.js"><link rel="prefetch" href="/assets/js/41.a53d9e1e.js"><link rel="prefetch" href="/assets/js/42.ef67bdbc.js"><link rel="prefetch" href="/assets/js/43.8015aa78.js"><link rel="prefetch" href="/assets/js/44.3d19ff22.js"><link rel="prefetch" href="/assets/js/45.c4ec1046.js"><link rel="prefetch" href="/assets/js/46.b66c6c6a.js"><link rel="prefetch" href="/assets/js/47.792fbb9b.js"><link rel="prefetch" href="/assets/js/48.fff9e461.js"><link rel="prefetch" href="/assets/js/49.927540c7.js"><link rel="prefetch" href="/assets/js/50.7328b358.js"><link rel="prefetch" href="/assets/js/51.edf5a6f6.js"><link rel="prefetch" href="/assets/js/52.554531c8.js"><link rel="prefetch" href="/assets/js/53.cff155eb.js"><link rel="prefetch" href="/assets/js/54.79017acb.js"><link rel="prefetch" href="/assets/js/55.3f832b4e.js"><link rel="prefetch" href="/assets/js/56.fc46ef96.js"><link rel="prefetch" href="/assets/js/57.01d4bca6.js"><link rel="prefetch" href="/assets/js/58.af6eeeff.js"><link rel="prefetch" href="/assets/js/59.5f3be402.js"><link rel="prefetch" href="/assets/js/61.acc49c38.js"><link rel="prefetch" href="/assets/js/62.3bbe5a99.js"><link rel="prefetch" href="/assets/js/63.4c1ad2b7.js"><link rel="prefetch" href="/assets/js/64.660d1af7.js"><link rel="prefetch" href="/assets/js/65.d8475e70.js"><link rel="prefetch" href="/assets/js/66.fe8f81dc.js"><link rel="prefetch" href="/assets/js/67.bc970a69.js"><link rel="prefetch" href="/assets/js/68.5b401715.js"><link rel="prefetch" href="/assets/js/69.60a017c7.js"><link rel="prefetch" href="/assets/js/70.d0fe42fc.js"><link rel="prefetch" href="/assets/js/71.34114315.js"><link rel="prefetch" href="/assets/js/72.962129e8.js"><link rel="prefetch" href="/assets/js/73.a2267a94.js"><link rel="prefetch" href="/assets/js/74.2401111b.js"><link rel="prefetch" href="/assets/js/75.361c8ec8.js"><link rel="prefetch" href="/assets/js/76.323e94c6.js"><link rel="prefetch" href="/assets/js/77.b3c2a687.js"><link rel="prefetch" href="/assets/js/8.001cad53.js"><link rel="prefetch" href="/assets/js/9.d5c24b06.js"><link rel="prefetch" href="/assets/js/search.de4016ee.js">
    <link rel="stylesheet" href="/assets/css/0.styles.068dd2cd.css">
  </head>
  <body>
    <div id="loader-wrapper" style="display: none;opacity:0">
      <div id="loader"></div>
      <div class="loader-section section-left"></div>
      <div class="loader-section section-right"></div>
    </div>
    <div id="app" data-server-rendered="true"><div style="height:100%;" data-v-3431ceb9><section class="el-container main-container" data-v-3431ceb9><aside class="el-aside menu" style="width:auto;" data-v-7a66351a data-v-3431ceb9><ul role="menubar" class="menu-wrap el-menu" style="background-color:;" data-v-7a66351a><li data-v-7a66351a><div class="brand-wrap" style="background-image:url(/brand.jpg);" data-v-7a66351a><div class="brand" data-v-7a66351a><a href="/" class="avatar waves-effect waves-circle waves-light router-link-active" data-v-7a66351a><img src="/avatar.jpg" data-v-7a66351a></a> <hgroup class="introduce" data-v-7a66351a><div class="nickname" data-v-7a66351a>zhhlwd</div> <a title="zhhlwd@qq.com" class="mail" data-v-7a66351a>zhhlwd@qq.com</a></hgroup></div></div></li> <li role="menuitem" tabindex="-1" class="el-menu-item" style="padding-left:20px;color:;background-color:;" data-v-7a66351a><i class="iconfont icon-home" data-v-7a66351a></i> <span class="item-title" data-v-7a66351a>主页</span></li> <li role="menuitem" tabindex="-1" class="el-menu-item" style="padding-left:20px;color:;background-color:;" data-v-7a66351a><i class="iconfont icon-biaoqian" data-v-7a66351a></i> <span class="item-title" data-v-7a66351a>标签分类</span></li> <li role="menuitem" tabindex="-1" class="el-menu-item" style="padding-left:20px;color:;background-color:;" data-v-7a66351a><i class="iconfont icon-wenzhang" data-v-7a66351a></i> <span class="item-title" data-v-7a66351a>时间归档</span></li> <li role="menuitem" tabindex="-1" class="el-menu-item" style="padding-left:20px;color:;background-color:;" data-v-7a66351a><i class="iconfont icon-github" data-v-7a66351a></i> <span class="item-title" data-v-7a66351a>Github</span></li> <li role="menuitem" tabindex="-1" class="el-menu-item" style="padding-left:20px;color:;background-color:;" data-v-7a66351a><i class="iconfont icon-aboutme" data-v-7a66351a></i> <span class="item-title" data-v-7a66351a>自我介绍</span></li></ul></aside> <section class="el-container container-warp" data-v-3431ceb9><header id="topHeader" class="el-header top-header" style="height:60px;padding-left:260px;" data-v-15c2c99c data-v-3431ceb9><div class="header-warp el-row is-align-middle el-row--flex" data-v-15c2c99c><div class="el-col el-col-12 el-col-xs-7" data-v-15c2c99c><div class="el-row is-align-middle el-row--flex" data-v-15c2c99c><div class="el-col el-col-2" data-v-15c2c99c><button type="button" class="el-button el-button--primary is-circle" data-v-15c2c99c><!----><!----><span><i class="iconfont icon-caidan" data-v-15c2c99c></i></span></button></div></div></div> <div class="el-col el-col-20 el-col-xs-24" data-v-15c2c99c><div class="grid-content bg-purple-light" data-v-15c2c99c><div class="el-row is-justify-end is-align-middle el-row--flex" data-v-15c2c99c><div class="el-col el-col-13 el-col-xs-24 el-col-sm-21 el-col-md-17 el-col-lg-13" data-v-15c2c99c><div aria-haspopup="listbox" role="combobox" aria-owns="el-autocomplete-8344" class="el-autocomplete search-input" data-v-15c2c99c><div class="el-input el-input--small el-input--suffix"><!----><input type="text" autocomplete="off" valueKey="value" popperClass="search-popper" placeholder="搜搜看" fetchSuggestions="function () { [native code] }" debounce="300" placement="bottom-start" popperAppendToBody="true" value="" class="el-input__inner"><!----><span class="el-input__suffix"><span class="el-input__suffix-inner"><i class="el-input__icon el-icon-search search-ico" data-v-15c2c99c></i><!----></span><!----></span><!----></div><div role="region" class="el-autocomplete-suggestion el-popper search-popper" style="width:;display:none;"><div class="el-scrollbar"><div class="el-autocomplete-suggestion__wrap el-scrollbar__wrap el-scrollbar__wrap--hidden-default"><ul class="el-scrollbar__view el-autocomplete-suggestion__list"></ul></div><div class="el-scrollbar__bar is-horizontal"><div class="el-scrollbar__thumb" style="width:0;transform:translateX(0%);ms-transform:translateX(0%);webkit-transform:translateX(0%);"></div></div><div class="el-scrollbar__bar is-vertical"><div class="el-scrollbar__thumb" style="height:0;transform:translateY(0%);ms-transform:translateY(0%);webkit-transform:translateY(0%);"></div></div></div></div></div></div></div></div></div></div></header> <main class="el-main my-main" style="margin-left:240px;" data-v-c4863568 data-v-3431ceb9><div class="content-header index-header" data-v-61dd99b6 data-v-c4863568><div class="container fade-scale in" data-v-61dd99b6><h1 id="conentHeader" class="title" data-v-61dd99b6>【读书笔记】《JavaScript权威指南》第7章数组</h1> <h5 class="subtitle" data-v-61dd99b6>最后更新时间：2019-02-23 00:09:45</h5></div></div> <div data-v-aa2eb952 data-v-c4863568 data-v-c4863568><div class="post-content el-row is-justify-center el-row--flex" data-v-aa2eb952><div id="post-card" class="post-card post-sign el-col el-col-16 el-col-xs-24 el-col-sm-23 el-col-md-23 el-col-lg-16" data-v-aa2eb952><div class="content__default" data-v-aa2eb952><h2 id="数组简介（了解）"><a href="#数组简介（了解）" aria-hidden="true" class="header-anchor">#</a> 数组简介（了解）</h2> <p>  数组是值的有序集合。每个值叫做一个元素，而每个元素在数组中有一个位置，以数字表示，称为索引。<br>
  JavaScript 数组是无类型的：数组元素可以是任意类型，并且同一个数组中的不同元素也可能有不同的类型。数组的元素甚至也可能是对象或其他数组，这允许创建复杂的数据结构，如对象的数组和数组的数组。<br>
  JavaScript 数组的索引是基于零的 32 位数值：第一个元素的索引为 0，最大可能的索引为 4294967294（2^32-2），数组最大能容纳 4294967295 个元素。<br>
  JavaScript 数组是动态的：根据需要它们会增长或缩减，并且在创建数组时无须声明一个固定的大小或者在数组大小变化时无须重新分配空间。<br>
  JavaScript 数组可能是稀疏的：数组元素的索引不一定要连续的，它们之间可以有空缺。<br>
  每个 JavaScript 数组都有一个 length 属性。针对非稀疏数组，该属性就是数组元素的个数。针对稀疏数组，length 比所有元素的索引要大。</p> <h2 id="创建数组（掌握）"><a href="#创建数组（掌握）" aria-hidden="true" class="header-anchor">#</a> 创建数组（掌握）</h2> <h3 id="数组直接量"><a href="#数组直接量" aria-hidden="true" class="header-anchor">#</a> 数组直接量</h3> <p>  使用数组直接量是创建数组最简单的方法，在方括号中将数组元素用逗号隔开即可。</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token keyword">var</span> empty<span class="token operator">=</span><span class="token punctuation">[</span><span class="token punctuation">]</span>；<span class="token comment">//没有元素的数组</span>
<span class="token keyword">var</span> primes<span class="token operator">=</span><span class="token punctuation">[</span><span class="token number">2</span>，<span class="token number">3</span>，<span class="token number">5</span>，<span class="token number">7</span>，<span class="token number">11</span><span class="token punctuation">]</span>；<span class="token comment">//有5个数值的数组</span>
<span class="token keyword">var</span> misc<span class="token operator">=</span><span class="token punctuation">[</span><span class="token number">1.1</span>，<span class="token boolean">true</span>，<span class="token string">&quot;a&quot;</span>，<span class="token punctuation">]</span>；<span class="token comment">//3个不同类型的元素和结尾的逗号</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div><p>  如果省略数组直接量中的某个值，省略的元素将被赋子予 undefined 值：</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token keyword">var</span> count<span class="token operator">=</span><span class="token punctuation">[</span><span class="token number">1</span>，，<span class="token number">3</span><span class="token punctuation">]</span>；<span class="token comment">//数组有3个元素，中间的那个元素值为undefined</span>
<span class="token keyword">var</span> undefs<span class="token operator">=</span><span class="token punctuation">[</span>，，<span class="token punctuation">]</span>；<span class="token comment">//数组有2个元素，都是undefined</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><p>  数组直接量的语法允许有可选的结尾的逗号，故[，，]只有两个元素而非三个。</p> <h3 id="调用构造函数-array（）"><a href="#调用构造函数-array（）" aria-hidden="true" class="header-anchor">#</a> 调用构造函数 Array（）</h3> <ul><li>调用时没有参数：</li></ul> <div class="language- line-numbers-mode"><pre class="language-text"><code>var a=new Array（）；
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><p>  该方法创建一个没有任何元素的空数组，等同于数组直接量[]。</p> <ul><li>调用时有一个数值参数，它指定长度：</li></ul> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token keyword">var</span> a<span class="token operator">=</span><span class="token keyword">new</span> <span class="token class-name">Array</span>（<span class="token number">10</span>）；
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><p>  该技术创建指定长度的数组。当预先知道所需元素个数时，这种形式的 Array（）构造函数可以用来预分配一个数组空间。注意，数组中没有存储值，甚至数组的索引属性“0”、“1”等还未定义。</p> <ul><li>显式指定两个或多个数组元素或者数组的一个非数值元素：</li></ul> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token keyword">var</span> a <span class="token operator">=</span><span class="token keyword">new</span> <span class="token class-name">Array</span>（<span class="token number">5</span>，<span class="token number">4</span>，<span class="token number">3</span>，<span class="token number">2</span>，<span class="token number">1</span>，<span class="token string">&quot;testing，testing&quot;</span>）；
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><p>  以这种形式，构造函数的参数将会成为新数组的元素。使用数组字面量比这样使用 Array（）构造函数要简单多了。</p> <h2 id="数组元素的读和写（掌握）"><a href="#数组元素的读和写（掌握）" aria-hidden="true" class="header-anchor">#</a> 数组元素的读和写（掌握）</h2> <p>  使用[]操作符来访问数组中的一个元素。数组的引用位于方括号的左边。方括号中是一个返回非负整数值的任意表达式。使用该语法既可以读又可以写数组的一个元素。</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token keyword">var</span> a<span class="token operator">=</span><span class="token punctuation">[</span><span class="token string">&quot;world&quot;</span><span class="token punctuation">]</span>；<span class="token comment">//从一个元素的数组开始</span>
<span class="token keyword">var</span> value<span class="token operator">=</span>a<span class="token punctuation">[</span>o<span class="token punctuation">]</span>；<span class="token comment">//读第0个元素</span>
a<span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token operator">=</span><span class="token number">3.14</span>；<span class="token comment">//写第1个元素</span>
i<span class="token operator">=</span><span class="token number">2</span>；
a<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token operator">=</span><span class="token number">3</span>；<span class="token comment">//写第2个元素</span>
a<span class="token punctuation">[</span>i<span class="token operator">+</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token operator">=</span><span class="token string">&quot;hello&quot;</span>；<span class="token comment">//写第3个元素</span>
a<span class="token punctuation">[</span>a<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">]</span><span class="token operator">=</span>a<span class="token punctuation">[</span>o<span class="token punctuation">]</span>；<span class="token comment">//读第0个和第2个元素，写第3个元素</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br></div></div><p>  所有的索引都是属性名，但只有在 0~2^32-2 之间的整数属性名才是索引。所有的数组都是对象，可以为其创建任意名字的属性。但如果使用的属性是数组的索引，数组的特殊行为就是将根据需要更新它们的 length 属性值。<br>
  注意，可以使用负数或非整数来索引数组。这种情况下，数值转换为字符串，字符串作为属性名来用。如果凑巧使用了是非负整数的字符串，它就当做数组索引，而非对象属性，当使用的一个浮点数和一个整数相等时情况也是一样的：</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code>a<span class="token punctuation">[</span><span class="token operator">-</span><span class="token number">1.23</span><span class="token punctuation">]</span><span class="token operator">=</span><span class="token boolean">true</span>；<span class="token comment">//这将创建一个名为“-1.23&quot;的属性</span>
a<span class="token punctuation">[</span><span class="token string">&quot;1000&quot;</span><span class="token punctuation">]</span><span class="token operator">=</span><span class="token number">0</span>；<span class="token comment">//这是数组的第1001个元素</span>
a<span class="token punctuation">[</span><span class="token number">1.000</span><span class="token punctuation">]</span><span class="token comment">//和a[1]相等</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div><p>  既然数组是对象，那么它们可以从原型中继承元素。在 ECMAScript5 中，数组可以定义元素的 getter 和 setter 方法。如果一个数组确实继承了元素或使用了元素的 getter 和 setter 方法，你应该期望它使用非优化的代码路径：访问这种数组的元素的时间会与常规对象属性的查找时间相近。</p> <h2 id="稀疏数组（掌握）"><a href="#稀疏数组（掌握）" aria-hidden="true" class="header-anchor">#</a> 稀疏数组（掌握）</h2> <p>  稀疏数组就是包含从 0 开始的不连续索引的数组。通常，数组的 length 属性值代表数组中元素的个数。如果数组是稀疏的，length 属性值大于元素的个数。可以用 Array（）构造函数或简单地指定数组的索引值大于当前的数组长度来创建稀疏数组。</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code>a<span class="token operator">=</span><span class="token keyword">new</span> <span class="token class-name">Array</span>（<span class="token number">5</span>）；<span class="token comment">//数组没有元素，但是a.length是5</span>
a<span class="token operator">=</span><span class="token punctuation">[</span><span class="token punctuation">]</span>；<span class="token comment">//创建一个空数组，length=o</span>
a<span class="token punctuation">[</span><span class="token number">1000</span><span class="token punctuation">]</span><span class="token operator">=</span><span class="token number">0</span>；<span class="token comment">//赋值添加一个元素，但是设置1ength为1001</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div><p>  注意，当在数组直接量中省略值时不会创建稀疏数组。省略的元素在数组中是存在的，其值为 undefined。这和数组元素根本不存在是有一些微妙的区别的。可以用 in 操作符检测两者之间的区别：</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token keyword">var</span> al<span class="token operator">=</span><span class="token punctuation">[</span>，，，<span class="token punctuation">]</span>；<span class="token comment">//数组是[undefined，undefined，undefined]</span>
<span class="token keyword">var</span> a2<span class="token operator">=</span><span class="token keyword">new</span> <span class="token class-name">Array</span>（<span class="token number">3</span>）；<span class="token comment">//该数组根本没有元素</span>
<span class="token number">0</span> <span class="token keyword">in</span> al<span class="token comment">//=&gt;true:a1在索引0处有一个元素</span>
<span class="token number">0</span> <span class="token keyword">in</span> a2<span class="token comment">//=&gt;false:a2在索引0处没有元素</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br></div></div><p>  需要注意的是，当省略数组直接量中的值时（使用连续的逗号，比如[1，，3]），这时所得到的数组也是稀疏数组，省略掉的值是不存在的：</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token keyword">var</span> al<span class="token operator">=</span><span class="token punctuation">[</span>，<span class="token punctuation">]</span>；<span class="token comment">//此数组没有元素，长度是1</span>
<span class="token keyword">var</span> a2<span class="token operator">=</span><span class="token punctuation">[</span><span class="token keyword">undefined</span><span class="token punctuation">]</span>；<span class="token comment">//此数组包含一个值为undefined的元素</span>
<span class="token number">0</span> <span class="token keyword">in</span> a1<span class="token comment">//=&gt;false:al在索引0处没有元素</span>
<span class="token number">0</span> <span class="token keyword">in</span> a2<span class="token comment">//=&gt;true:a2在索引0处有一个值为undefined的元素</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br></div></div><h2 id="数组长度（掌握）"><a href="#数组长度（掌握）" aria-hidden="true" class="header-anchor">#</a> 数组长度（掌握）</h2> <p>  每个数组有一个 length 属性，就是这个属性使其区别于常规的 JavaScript 对象。针对稠密（也就是非稀疏）数组，1ength 属性值代表数组中元素的个数。其值比数组中最大的索引大 1：</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">.</span>length<span class="token comment">//=&gt;0：数组没有元素</span>
<span class="token punctuation">[</span>a<span class="token string">'，'</span>b<span class="token string">'，'</span>c'<span class="token punctuation">]</span><span class="token punctuation">.</span>length<span class="token comment">//=&gt;3：最大的索引为2，length为3</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><p>  当数组是稀疏的时，1ength 属性值大于元素的个数。而且数组长度保证大于它每个元素的索引值。或者，换一种说法，在数组中（无论稀疏与否）肯定找不到一个元素的索引值大于或等于它的长度。<br>
  为了维持此规则不变化，数组有两个特殊的行为。第一个如同上面的描述：如果为一个数组元素赋值，它的索引 i 大于或等于现有数组的长度时，length 属性的值将设置为 i+1。<br>
  第二个特殊的行为就是设置 length 属性为一个小于当前长度的非负整数 n 时，当前数组中那些索引值大于或等于 n 的元素将从中删除：</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code>a<span class="token operator">=</span><span class="token punctuation">[</span><span class="token number">1</span>，<span class="token number">2</span>，<span class="token number">3</span>，<span class="token number">4</span>，<span class="token number">5</span><span class="token punctuation">]</span>；<span class="token comment">//从5个元素的数组开始</span>
a<span class="token punctuation">.</span>length<span class="token operator">=</span><span class="token number">3</span>；<span class="token comment">//现在a为[1，2，3]</span>
a<span class="token punctuation">.</span>length<span class="token operator">=</span><span class="token number">0</span>；<span class="token comment">//删除所有的元素。a为[]</span>
a<span class="token punctuation">.</span>length<span class="token operator">=</span><span class="token number">5</span>；<span class="token comment">//长度为5，但是没有元素，就像new Array（5）</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br></div></div><p>  还可以将数组的 length 属性值设置为大于其当前的长度。实际上这不会向数组中添加新的元素，它只是在数组尾部创建一个空的区域。<br>
  在 ECMAScript5 中，可以用 Object.defineProperty（）让数组的 length 属性变成只读的</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code>a<span class="token operator">=</span><span class="token punctuation">[</span><span class="token number">1</span>，<span class="token number">2</span>，<span class="token number">3</span><span class="token punctuation">]</span>；<span class="token comment">//从3个元素的数组开始</span>
Object<span class="token punctuation">.</span>defineProperty（a，“<span class="token number">1</span>ength&quot;，
                    <span class="token punctuation">{</span>writable<span class="token punctuation">:</span><span class="token boolean">false</span><span class="token punctuation">}</span>）；<span class="token comment">//让length属性只读</span>
a<span class="token punctuation">.</span>length<span class="token operator">=</span><span class="token number">0</span>；<span class="token comment">//a不会改变</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br></div></div><p>  类似地，如果让一个数组元素不能配置，就不能删除它。如果不能删除它，length 属性不能设置为小于不可配置元素的索引值。</p> <h2 id="数组元素的添加和删除-掌握"><a href="#数组元素的添加和删除-掌握" aria-hidden="true" class="header-anchor">#</a> 数组元素的添加和删除(掌握)</h2> <h3 id="添加"><a href="#添加" aria-hidden="true" class="header-anchor">#</a> 添加</h3> <p>  为新索引赋值：</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code>a<span class="token operator">=</span><span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token comment">//开始是一个空数组</span>
a<span class="token punctuation">[</span>o<span class="token punctuation">]</span><span class="token operator">=</span><span class="token string">&quot;zero&quot;</span>；<span class="token comment">//然后向其中添加元素</span>
a<span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token operator">=</span><span class="token string">&quot;one&quot;</span>；
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div><p>  也可以使用 push（）方法在数组末尾增加一个或多个元素：</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code>a<span class="token operator">=</span><span class="token punctuation">[</span><span class="token punctuation">]</span>；<span class="token comment">//开始是一个空数组</span>
a<span class="token punctuation">.</span>push（<span class="token string">&quot;zero&quot;</span>）<span class="token comment">//在末尾添加一个元素。a=[&quot;zero&quot;]</span>
a<span class="token punctuation">.</span>push（<span class="token string">&quot;one&quot;</span>，<span class="token string">&quot;two&quot;</span>）<span class="token comment">//再添加两个元素。a=[&quot;zero&quot;，&quot;one&quot;，&quot;two&quot;]</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div><p>  在数组尾部压入一个元素与给数组 a[a.length]赋值是一样的。可以使用 unshift（）方法在数组的首部插入一个元素，并且将其他元素依次移到更高的索引处。</p> <h3 id="删除"><a href="#删除" aria-hidden="true" class="header-anchor">#</a> 删除</h3> <p>  可以像删除对象属性一样使用 delete 运算符来删除数组元素：</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code>a<span class="token operator">=</span><span class="token punctuation">[</span><span class="token number">1</span>，<span class="token number">2</span>，<span class="token number">3</span><span class="token punctuation">]</span>；
<span class="token keyword">delete</span> a<span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span>；<span class="token comment">//a在索引1的位置不再有元素</span>
<span class="token number">1</span> <span class="token keyword">in</span> a<span class="token comment">//=&gt;false：数组索引1并未在数组中定义</span>
a<span class="token punctuation">.</span>length<span class="token comment">//=&gt;3：delete操作并不影响数组长度</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br></div></div><p>  删除数组元素与为其赋 undefined 值是类似的（但有一些微妙的区别）。注意，对一个数组元素使用 delete 不会修改数组的 length 属性，也不会将元素从高索引处移下来填充已删除属性留下的空白。如果从数组中删除一个元素，它就变成稀疏数组。<br>
  上面我们看到，也可以简单地设置 length 属性为一个新的期望长度来删除数组尾部的元素。<br>
  数组有 pop（）方法，使减少长度 1 并返回被删除元素的值。还有一个 shift（）方法，从数组头部删除一个元素。和 delete 不同的是 shift（）方法将所有元素下移到比当前索引低 1 的地方。<br>
  最后，splice（）是一个通用的方法来插入、删除或替换数组元素。它会根据需要修改 length 属性并移动元素到更高或较低的索引处。</p> <h2 id="数组遍历（掌握）"><a href="#数组遍历（掌握）" aria-hidden="true" class="header-anchor">#</a> 数组遍历（掌握）</h2> <p>  在嵌套循环或其他性能非常重要的上下文中，可以看到这种基本的数组遍历需要优化，数组的长度应该只查询一次而非每次循环都要查询：</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token keyword">for</span>（<span class="token keyword">var</span> i<span class="token operator">=</span>o，len<span class="token operator">=</span>keys<span class="token punctuation">.</span>length；i<span class="token operator">&lt;</span>len；i<span class="token operator">++</span>）<span class="token punctuation">{</span>
<span class="token comment">//循环体仍然不变</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div><p>  这些例子假设数组是稠密的，并且所有的元素都是合法数据。否则，使用数组元素之前应该先检测它们。如果想要排除 nu11、undefined 和不存在的元素，代码如下：</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token keyword">for</span>（<span class="token keyword">var</span> i<span class="token operator">=</span>o；i<span class="token operator">&lt;</span>a<span class="token punctuation">.</span>length；i<span class="token operator">++</span>）<span class="token punctuation">{</span>
    <span class="token keyword">if</span>（<span class="token operator">!</span>a<span class="token punctuation">[</span>i<span class="token punctuation">]</span>）<span class="token keyword">continue</span>；<span class="token comment">//跳过null、undefined和不存在的元素</span>
    <span class="token comment">//循环体</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br></div></div><p>  如果只想跳过 undefined 和不存的元素，代码如下：</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token keyword">for</span>（<span class="token keyword">var</span> i<span class="token operator">=</span><span class="token number">0</span>；i<span class="token operator">&lt;</span>a<span class="token punctuation">.</span>length；i<span class="token operator">++</span>）<span class="token punctuation">{</span>
    <span class="token keyword">if</span>（a<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token operator">===</span><span class="token keyword">undefined</span>）<span class="token keyword">continue</span>；<span class="token comment">//跳过undefined+不存在的元素</span>
    <span class="token comment">//循环体</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br></div></div><p>  最后，如果只想跳过不存在的元素而仍然要处理存在的 undefined 元素，代码如下：</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token keyword">for</span>（<span class="token keyword">var</span> i<span class="token operator">=</span>o；i<span class="token operator">&lt;</span> a<span class="token punctuation">.</span>length；i<span class="token operator">++</span>）<span class="token punctuation">{</span>
    <span class="token keyword">if</span>（！（i <span class="token keyword">in</span> a））<span class="token keyword">continue</span>；<span class="token comment">//跳过不存在的元素</span>
<span class="token comment">//循环体</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br></div></div><p>  还可以使用 for/in 循环处理稀疏数组。循环每次将一个可枚举的属性名（包括数组索引）赋值给循环变量。不存在的索引将不会遍历到：</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token keyword">for</span>（<span class="token keyword">var</span> index <span class="token keyword">in</span> sparseArray）<span class="token punctuation">{</span>
    <span class="token keyword">var</span> value<span class="token operator">=</span>sparseArray<span class="token punctuation">[</span>index<span class="token punctuation">]</span>；
    <span class="token comment">//此处可以使用索引和值做一些事情</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br></div></div><p>  for/in 循环能够枚举继承的属性名，如添加到 Array.prototype 中的方法。由于这个原因，在数组上不应该使用 for/in 循环，除非使用额外的检测方法来过滤不想要的属性。如下检测代码取其一即可：</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token keyword">for</span>（<span class="token keyword">var</span> i <span class="token keyword">in</span> a）<span class="token punctuation">{</span>
    <span class="token keyword">if</span>（<span class="token operator">!</span>a<span class="token punctuation">.</span>hasownProperty（i））<span class="token keyword">continue</span>；<span class="token comment">//跳过继承的属性</span>
    <span class="token comment">//循环体</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br></div></div><div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token keyword">for</span>（<span class="token keyword">var</span> i <span class="token keyword">in</span> a）<span class="token punctuation">{</span>
    <span class="token comment">//跳过不是非负整数的i</span>
    <span class="token keyword">if</span>（String （Math<span class="token punctuation">.</span>floor（Math<span class="token punctuation">.</span>abs（Number（i））））<span class="token operator">!==</span>i）<span class="token keyword">continue</span>；
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br></div></div><p>  ECMAScript 规范允许 for/in 循环以不同的顺序遍历对象的属性。通常数组元素的遍历实现是升序的，但不能保证一定是这样的。特别地，如果数组同时拥有对象属性和数组元素，返回的属性名很可能是按照创建的顺序而非数值的大小顺序。如何处理这个问题的实现各不相同，如果算法依赖于遍历的顺序，那么最好不要使用 for/in 而用常规的 for 循环。<br>
  ECMAScript5 定义了一些遍历数组元素的新方法，按照索引的顺序按个传递给定义的一个函数。这些方法中最常用的就是 forEach（）方法：</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code>

<span class="token keyword">var</span> data<span class="token operator">=</span><span class="token punctuation">[</span><span class="token number">1</span>，<span class="token number">2</span>，<span class="token number">3</span>，<span class="token number">4</span>，<span class="token number">5</span><span class="token punctuation">]</span>；<span class="token comment">//这是需要遍历的数组</span>
<span class="token keyword">var</span> sumOfSquares<span class="token operator">=</span><span class="token number">0</span>；<span class="token comment">//要得到数据的平方和</span>
data<span class="token punctuation">.</span>forEach（<span class="token keyword">function</span>（x）<span class="token punctuation">{</span><span class="token comment">//把每个元素传递给此函数</span>
                sumOfSquares<span class="token operator">+=</span>x<span class="token operator">*</span>x；<span class="token comment">//平方相加</span>
<span class="token punctuation">}</span>）；
SumOf5quares <span class="token comment">//=）55：1+4+9+16+25</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br></div></div><h2 id="多维数组-掌握"><a href="#多维数组-掌握" aria-hidden="true" class="header-anchor">#</a> 多维数组(掌握)</h2> <p>  JavaScript 不支持真正的多维数组，但可以用数组的数组来模似。访问数组的数组中的元素，只要简单地使用两次[]操作符即可。这里有一个具体的例子，它使用二维数组作为一个九九乘法表：</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token comment">//创建一个多维数组</span>
<span class="token keyword">var</span> table<span class="token operator">=</span><span class="token keyword">new</span> <span class="token class-name">Array</span>（<span class="token number">10</span>）；<span class="token comment">//表格有10行</span>
<span class="token keyword">for</span>（vari<span class="token operator">=</span>o；i<span class="token operator">&lt;</span>table<span class="token punctuation">.</span>length；i<span class="token operator">++</span>）<span class="token punctuation">{</span>
    table<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token operator">=</span><span class="token keyword">new</span> <span class="token class-name">Array</span>（<span class="token number">10</span>）；<span class="token comment">//每行有10列</span>
<span class="token punctuation">}</span>
<span class="token comment">//初始化数组</span>
<span class="token keyword">for</span>（<span class="token keyword">var</span> row<span class="token operator">=</span><span class="token number">0</span>；row<span class="token operator">&lt;</span> table<span class="token punctuation">.</span>length；row<span class="token operator">++</span>）<span class="token punctuation">{</span>
    <span class="token keyword">for</span>（col<span class="token operator">=</span>o；col<span class="token operator">&lt;</span>table<span class="token punctuation">[</span>row<span class="token punctuation">]</span><span class="token punctuation">.</span>length；col<span class="token operator">++</span>）<span class="token punctuation">{</span>
        table<span class="token punctuation">[</span>row<span class="token punctuation">]</span><span class="token punctuation">[</span>col<span class="token punctuation">]</span><span class="token operator">=</span>row<span class="token operator">*</span>col；
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
<span class="token comment">//使用多维数组来计算（查询）5*7</span>
<span class="token keyword">var</span> product<span class="token operator">=</span>table<span class="token punctuation">[</span><span class="token number">5</span><span class="token punctuation">]</span><span class="token punctuation">[</span><span class="token number">7</span><span class="token punctuation">]</span>；<span class="token comment">//35</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br></div></div><h2 id="数组方法-掌握"><a href="#数组方法-掌握" aria-hidden="true" class="header-anchor">#</a> 数组方法(掌握)</h2> <h3 id="ecmascript-3"><a href="#ecmascript-3" aria-hidden="true" class="header-anchor">#</a> ECMAScript 3</h3> <h4 id="join-转化为字符串"><a href="#join-转化为字符串" aria-hidden="true" class="header-anchor">#</a> join()转化为字符串</h4> <p>  Array.join（）方法将数组中所有元素都转化为字符串并连接在一起，返回最后生成的字符串。可以指定一个可选的字符串在生成的字符串中来分隔数组的各个元素。如果不指定分隔符，默认使用逗号。如以下代码所示：</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token keyword">var</span> a<span class="token operator">=</span><span class="token punctuation">[</span><span class="token number">1</span>，<span class="token number">2</span>，<span class="token number">3</span><span class="token punctuation">]</span>；<span class="token comment">//创建一个包含三个元素的数组</span>
a<span class="token punctuation">.</span>join（）；<span class="token comment">//=&gt;&quot;1，2，3&quot;</span>
a<span class="token punctuation">.</span>join（<span class="token string">&quot;&quot;</span>）；<span class="token comment">//=&gt;&quot;123&quot;</span>
a<span class="token punctuation">.</span>join（<span class="token string">&quot;&quot;</span>）；<span class="token comment">//=&gt;&quot;123&quot;</span>
<span class="token keyword">var</span> b<span class="token operator">=</span><span class="token keyword">new</span> <span class="token class-name">Array</span>（<span class="token number">10</span>）；<span class="token comment">//长度为10的空数组</span>
b<span class="token punctuation">.</span>join（<span class="token string">'-'</span>）<span class="token comment">//=-：9个连字号组成的字符串</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br></div></div><p>  Array.join（）方法是 String.split（）方法的逆向操作，后者是将字符串分割成若干块来创建一个数组。</p> <h4 id="reverse-颠倒顺序"><a href="#reverse-颠倒顺序" aria-hidden="true" class="header-anchor">#</a> reverse()颠倒顺序</h4> <p>  Array.reverse（）方法将数组中的元素颠倒顺序，返回逆序的数组。它采取了替换；换句话说，它不通过重新排列的元素创建新的数组，而是在原先的数组中重新排列它们。</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token keyword">var</span> a<span class="token operator">=</span><span class="token punctuation">[</span><span class="token number">1</span>，<span class="token number">2</span>，<span class="token number">3</span><span class="token punctuation">]</span>；
a<span class="token punctuation">.</span>reverse（）<span class="token punctuation">.</span>join（）<span class="token comment">//=&gt;&quot;3，2，1&quot;，并且现在的a是[3，2，1]</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><h4 id="sort-元素排序"><a href="#sort-元素排序" aria-hidden="true" class="header-anchor">#</a> sort()元素排序</h4> <p>  Array.sort（）方法将数组中的元素排序并返回排序后的数组。当不带参数调用 sort（）时，数组元素以字母表顺序排序（如有必要将临时转化为字符串进行比较）：</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token keyword">var</span> a <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Array</span><span class="token punctuation">(</span><span class="token string">'banana'</span><span class="token punctuation">,</span> <span class="token string">'cherry'</span><span class="token punctuation">,</span> <span class="token string">'apple'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
a<span class="token punctuation">.</span><span class="token function">sort</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">var</span> s <span class="token operator">=</span> a<span class="token punctuation">.</span><span class="token function">join</span><span class="token punctuation">(</span><span class="token string">','</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">//s==&quot;apple, banana, cherry&quot;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div><p>  如果数组包含 undefined 元素，它们会被排到数组的尾部。<br>
  为了按照其他方式而非字母表顺序进行数组排序，必须给 sort（）方法传递一个比较函数。该函数决定了它的两个参数在排好序的数组中的先后顺序。假设第一个参数应该在前，比较函数应该返回一个小于 0 的数值。反之，假设第一个参数应该在后，函数应该返回一个大于 0 的数值。并且，假设两个值相等（也就是说，它们的顺序无关紧要），函数应该返回 0。因此，例如，用数值大小而非字母表顺序进行数组排序，代码如下：</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token keyword">var</span> a<span class="token operator">=</span><span class="token punctuation">[</span><span class="token number">33</span>，<span class="token number">4</span>，<span class="token number">1111</span>，<span class="token number">222</span><span class="token punctuation">]</span>；
a<span class="token punctuation">.</span>sort（）；<span class="token comment">//字母表顺序：1111，222，33，4</span>
a<span class="token punctuation">.</span>sort（<span class="token keyword">function</span>（a，b）<span class="token punctuation">{</span><span class="token comment">//数值顺序：4，33，222，1111</span>
        <span class="token keyword">return</span> a<span class="token operator">-</span>b；<span class="token comment">//根据顺序，返回负数、0、正数</span>
        <span class="token punctuation">}</span>）；
a<span class="token punctuation">.</span>sort（<span class="token keyword">function</span>（a，b）<span class="token punctuation">{</span><span class="token keyword">return</span> b<span class="token operator">-</span>a<span class="token punctuation">}</span>）<span class="token punctuation">;</span><span class="token comment">//数值大小降序</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br></div></div><p>  另外一个数组元素排序的例子，也许需要对一个字符串数组执行不区分大小写的字母表排序，比较函数首先将参数都转化为小写字符串（使用 toLowerCase（）方法），再开始比较：</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code>a<span class="token operator">=</span><span class="token punctuation">[</span><span class="token string">'ant'</span>，<span class="token string">'Bug'</span>，<span class="token string">'cat'</span>，<span class="token string">'Dog'</span><span class="token punctuation">]</span>
a<span class="token punctuation">.</span>sort（）；<span class="token operator">/</span>区分大小写的排序：<span class="token punctuation">[</span><span class="token string">'Bug'</span>，<span class="token string">'Dog'</span>，<span class="token string">'ant'</span>，cat'<span class="token punctuation">]</span>
a<span class="token punctuation">.</span>sort（<span class="token keyword">function</span>（s，t）<span class="token punctuation">{</span><span class="token comment">//不区分大小写的排序</span>
            <span class="token keyword">var</span> a <span class="token operator">=</span> s<span class="token punctuation">.</span>tolowerCase（）；
            <span class="token keyword">var</span> b<span class="token operator">=</span>t<span class="token punctuation">.</span>tolowerCase（）；
            <span class="token keyword">if</span>（a<span class="token operator">&lt;</span>b）<span class="token keyword">return</span><span class="token operator">-</span><span class="token number">1</span>；
            <span class="token keyword">if</span>（a<span class="token operator">&gt;</span>b）<span class="token keyword">return</span> <span class="token number">1</span>；
            <span class="token keyword">return</span> o；
        <span class="token punctuation">}</span>）；<span class="token comment">//=&gt;I'ant'，Bug'，'cat'，0og']</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br></div></div><h4 id="concat-连接数组"><a href="#concat-连接数组" aria-hidden="true" class="header-anchor">#</a> concat()连接数组</h4> <p>  Array.concat（）方法创建并返回一个新数组，它的元素包括调用 concat（）的原始数组的元素和 concat（）的每个参数。如果这些参数中的任何一个自身是数组，则连接的是数组的元素，而非数组本身。但要注意，concat（）不会递归扁平化数组的数组。concat（）也不会修改调用的数组。下面有一些示例：</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token keyword">var</span> a<span class="token operator">=</span><span class="token punctuation">[</span><span class="token number">1</span>，<span class="token number">2</span>，<span class="token number">3</span><span class="token punctuation">]</span>；
a<span class="token punctuation">.</span>concat（<span class="token number">4</span>，<span class="token number">5</span>）<span class="token comment">//返回[1，2，3，4，5]</span>
a<span class="token punctuation">.</span>concat（<span class="token punctuation">[</span><span class="token number">4</span>，<span class="token number">5</span><span class="token punctuation">]</span>）；<span class="token comment">//返回[1，2，3，4，5]</span>
a<span class="token punctuation">.</span>concat（<span class="token punctuation">[</span><span class="token number">4</span>，<span class="token number">5</span><span class="token punctuation">]</span>，<span class="token punctuation">[</span><span class="token number">6</span>，<span class="token number">7</span><span class="token punctuation">]</span>）<span class="token comment">//返回[1，2，3，4，5，6，7]</span>
a<span class="token punctuation">.</span>concat（<span class="token number">4</span>，<span class="token punctuation">[</span><span class="token number">5</span>，<span class="token punctuation">[</span><span class="token number">6</span>，<span class="token number">7</span><span class="token punctuation">]</span><span class="token punctuation">]</span>）<span class="token comment">//返回[1，2，3，4，5，[6，7]]</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br></div></div><h4 id="slice-截取指定元素"><a href="#slice-截取指定元素" aria-hidden="true" class="header-anchor">#</a> slice()截取指定元素</h4> <p>  Array.slice（）方法返回指定数组的一个片段或子数组。它的两个参数分别指定了片段的开始和结束的位置。返回的数组包含第一个参数指定的位置和所有到但不含第二个参数指定的位置之间的所有数组元素。<br>
  如果只指定一个参数，返回的数组将包含从开始位置到数组结尾的所有元素。如参数中出现负数，它表示相对于数组中最后一个元素的位置。例如，参数-1 指定了最后一个元素，而-3 指定了倒数第三个元素。注意，slice（）不会修改调用的数组。下面有一些示例：</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token keyword">var</span> a<span class="token operator">=</span><span class="token punctuation">[</span><span class="token number">1</span>，<span class="token number">2</span>，<span class="token number">3</span>，<span class="token number">4</span>，<span class="token number">5</span><span class="token punctuation">]</span>；
a<span class="token punctuation">.</span>slice（o，<span class="token number">3</span>）；<span class="token comment">//返回[1，2，3]</span>
a<span class="token punctuation">.</span>slice（<span class="token number">3</span>）；<span class="token comment">//返回[4，5]</span>
a<span class="token punctuation">.</span>slice（<span class="token number">1</span>，<span class="token operator">-</span><span class="token number">1</span>）；<span class="token comment">//返回[2，3，4]</span>
a<span class="token punctuation">.</span>slice（<span class="token operator">-</span><span class="token number">3</span>，<span class="token operator">-</span><span class="token number">2</span>）；<span class="token comment">//返回[3]</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br></div></div><h4 id="splice-插入或删除指定元素"><a href="#splice-插入或删除指定元素" aria-hidden="true" class="header-anchor">#</a> splice()插入或删除指定元素</h4> <p>  Array.splice（）方法是在数组中插入或删除元素的通用方法。不同于 slice（）和 concat（），splice（）会修改调用的数组。<br>
  splice（）能够从数组中删除元素、插入元素到数组中或者同时完成这两种操作。在插入或删除点之后的数组元素会根据需要增加或减小它们的索引值，因此数组的其他部分仍然保持连续的。<br>
  splice（）的第一个参数指定了插入和（或）删除的起始位置。第二个参数指定了应该从数组中删除的元素的个数。如果省略第二个参数，从起始点开始到数组结尾的所有元素都将被删除。splice（）返回一个由删除元素组成的数组，或者如果没有删除元素就返回一个空数组。</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token keyword">var</span> a<span class="token operator">=</span><span class="token punctuation">[</span><span class="token number">1</span>，<span class="token number">2</span>，<span class="token number">3</span>，<span class="token number">4</span>，<span class="token number">5</span>，<span class="token number">6</span>，<span class="token number">7</span>，<span class="token number">8</span><span class="token punctuation">]</span>；
a<span class="token punctuation">.</span>splice（<span class="token number">4</span>）；<span class="token comment">//返回[5，6，7，8]；a是[1，2，3，4]</span>
a<span class="token punctuation">.</span>splice（<span class="token number">1</span>，<span class="token number">2</span>）；<span class="token comment">//返回[2，3]；a是[1，4]</span>
a<span class="token punctuation">.</span>splice（<span class="token number">1</span>，<span class="token number">1</span>）；<span class="token comment">//返回[4]；a是[1]</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br></div></div><p>  splice（）的前两个参数指定了需要删除的数组元素。紧随其后的任意个数的参数指定了需要插入到数组中的元素，从第一个参数指定的位置开始插入。</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token keyword">var</span> a<span class="token operator">=</span><span class="token punctuation">[</span><span class="token number">1</span>，<span class="token number">2</span>，<span class="token number">3</span>，<span class="token number">4</span>，<span class="token number">5</span><span class="token punctuation">]</span>；
a<span class="token punctuation">.</span>splice（<span class="token number">2</span>，<span class="token number">0</span>，<span class="token string">'a'</span>，<span class="token string">'b'</span>）；<span class="token comment">//返回[]；a是[1，2，a'，'b'，3，4，5]</span>
a<span class="token punctuation">.</span>splice（<span class="token number">2</span>，<span class="token number">2</span>，<span class="token punctuation">[</span><span class="token number">1</span>，<span class="token number">2</span><span class="token punctuation">]</span>，<span class="token number">3</span>）；<span class="token comment">//返回['a’，'b]；a是[1，2，[1，2]，3，3，4，5]</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div><p>  注意，区别于 concat（），splice（）会插入数组本身而非数组的元素。</p> <h4 id="push（）和-pop（）数组尾部的插入或删除"><a href="#push（）和-pop（）数组尾部的插入或删除" aria-hidden="true" class="header-anchor">#</a> push（）和 pop（）数组尾部的插入或删除</h4> <p>  push（）和 pop（）方法允许将数组当做栈来使用。push（）方法在数组的尾部添加一个或多个元素，并返回数组新的长度。<br>
  pop（）方法则相反：它删除数组的最后一个元素，减小数组长度并返回它删除的值。注意，两个方法都修改并替换原始数组而非生成一个修改版的新数组。组合使用 push（）和 pop（）能够用 JavaScript 数组实现先进后出的栈。例如：</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token keyword">var</span> stack<span class="token operator">=</span><span class="token punctuation">[</span><span class="token punctuation">]</span>；<span class="token comment">//stack:[]</span>
stack<span class="token punctuation">.</span>push（<span class="token number">1</span>，<span class="token number">2</span>）；<span class="token comment">//stack:[1，2]返回2</span>
stack<span class="token punctuation">.</span>pop（）；<span class="token comment">//stack:[1]返回2</span>
stack<span class="token punctuation">.</span>push（<span class="token number">3</span>）；<span class="token comment">//stack:[1，3]返回2</span>
stack<span class="token punctuation">.</span>pop（）；<span class="token comment">//stack:[1]返回3</span>
stack<span class="token punctuation">.</span>push（<span class="token punctuation">[</span><span class="token number">4</span>，<span class="token number">5</span><span class="token punctuation">]</span>）；<span class="token comment">//stack:[1，[4，5]]返回2</span>
stack<span class="token punctuation">.</span>pop（）<span class="token comment">//stack:[1]返回[4，5]</span>
stack<span class="token punctuation">.</span>pop（）；<span class="token comment">//stack:[]返回1</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br></div></div><h4 id="unshift（）和-shift（）数组头部的插入或删除"><a href="#unshift（）和-shift（）数组头部的插入或删除" aria-hidden="true" class="header-anchor">#</a> unshift（）和 shift（）数组头部的插入或删除</h4> <p>  unshift（）在数组的头部添加一个或多个元素，并将已存在的元素移动到更高索引的位置来获得足够的空间，最后返回数组新的长度。<br>
  shift（）删除数组的第一个元素并将其返回，然后把所有随后的元素下移一个位置来填补数组头部的空缺。</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token keyword">var</span> a<span class="token operator">=</span><span class="token punctuation">[</span><span class="token punctuation">]</span>；<span class="token comment">//a:[]</span>
a<span class="token punctuation">.</span>unshift（<span class="token number">1</span>）；<span class="token comment">//a:[1]返回：1</span>
a<span class="token punctuation">.</span>unshift（<span class="token number">22</span>）；<span class="token comment">//a:[22，1]返回：2</span>
a<span class="token punctuation">.</span>shift（）；<span class="token comment">//a:[1]返回：22</span>
a<span class="token punctuation">.</span>unshift（<span class="token number">3</span>，<span class="token punctuation">[</span><span class="token number">4</span>，<span class="token number">5</span><span class="token punctuation">]</span>）；<span class="token comment">//a:[3，[4，5]，1]返回：3</span>
a<span class="token punctuation">.</span>shift（）；<span class="token comment">//a:[[4，5]，1]返回：3</span>
a<span class="token punctuation">.</span>shift（）；<span class="token comment">//a:[1]返回：[4，5]</span>
a<span class="token punctuation">.</span>shift（）；<span class="token comment">//a:[]返回：1</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br></div></div><p>  注意，当使用多个参数调用 unshift（）时它的行为令人惊讶。参数是一次性插入的（就像 splice（）方法）而非一次一个地插入。这意味着最终的数组中插入的元素的顺序和它们在参数列表中的顺序一致。而假如元素是一次一个地插入，它们的顺序应该是反过来的。</p> <h4 id="tostring（）和-tolocalestring（）"><a href="#tostring（）和-tolocalestring（）" aria-hidden="true" class="header-anchor">#</a> toString（）和 toLocaleString（）</h4> <p>  数组和其他 JavaScript 对象一样拥有 toString（）方法。针对数组，该方法将其每个元素转化为字符串（如有必要将调用元素的 toString（）方法）并且输出用逗号分隔的字符串列表。注意，输出不包括方括号或其他任何形式的包裹数组值的分隔符。例如：</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token punctuation">[</span><span class="token number">1</span>，<span class="token number">2</span>，<span class="token number">3</span><span class="token punctuation">]</span><span class="token punctuation">.</span>toString（）<span class="token comment">//生成‘1，2，3’</span>
<span class="token punctuation">[</span><span class="token string">&quot;a&quot;</span>，<span class="token string">&quot;b&quot;</span>，<span class="token string">&quot;c&quot;</span><span class="token punctuation">]</span><span class="token punctuation">.</span>toString（）<span class="token comment">//生成‘a，b，c'</span>
<span class="token punctuation">[</span><span class="token number">1</span>，<span class="token punctuation">[</span><span class="token number">2</span>，<span class="token string">'c'</span><span class="token punctuation">]</span><span class="token punctuation">]</span><span class="token punctuation">.</span>tostring（）<span class="token comment">//生成’1，2，c'</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div><p>  注意，这里与不使用任何参数调用 join（）方法返回的字符串是一样的。<br>
  toLocaleString（）是 toString（）方法的本地化版本。它调用元素的 toLocaleString（）方法将每个数组元素转化为字符串，并且使用本地化（和自定义实现的）分隔符将这些字符串连接起来生成最终的字符串。</p> <h3 id="ecmascript-5"><a href="#ecmascript-5" aria-hidden="true" class="header-anchor">#</a> ECMAScript 5</h3> <p>  在开始详细介绍之前，很有必要对 ECMAScript5 中的数组方法做一个概述。首先，大多数方法的第一个参数接收一个函数，并且对数组的每个元素（或一些元素）调用一次该函数。如果是稀疏数组，对不存在的元素不调用传递的函数。<br>
  在大多数情况下，调用提供的函数使用三个参数：数组元素、元素的索引和数组本身。通常，只需要第一个参数值，可以忽略后两个参数。<br>
  大多数 ECMAScript5 数组方法的第一个参数是一个函数，第二个参数是可选的。如果有第二个参数，则调用的函数被看做是第二个参数的方法。也就是说，在调用函数时传递进去的第二个参数作为它的 this 关键字的值来使用。被调用的函数的返回值非常重要，但是不同的方法处理返回值的方式也不一样。<br>
  ECMAScript5 中的数组方法都不会修改它们调用的原始数组。当然，传递给这些方法的函数是可以修改这些数组的。</p> <h4 id="foreach-数组遍历"><a href="#foreach-数组遍历" aria-hidden="true" class="header-anchor">#</a> forEach()数组遍历</h4> <p>  forEach（）方法从头至尾遍历数组，为每个元素调用指定的函数。如上所述，传递的函数作为 forEach（）的第一个参数。然后 forEach（）使用三个参数调用该函数：数组元素、元素的索引和数组本身。如果只关心数组元素的值，可以编写只有一个参数的函数—一额外的参数将忽略：</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token keyword">var</span> data<span class="token operator">=</span><span class="token punctuation">[</span><span class="token number">1</span>，<span class="token number">2</span>，<span class="token number">3</span>，<span class="token number">4</span>，<span class="token number">5</span><span class="token punctuation">]</span>；<span class="token comment">//要求和的数组</span>
<span class="token comment">//计算数组元素的和值</span>
<span class="token keyword">var</span> sum<span class="token operator">=</span><span class="token number">0</span>；<span class="token comment">//初始为0</span>
data<span class="token punctuation">.</span>forEach（<span class="token keyword">function</span>（value）<span class="token punctuation">{</span> sum <span class="token operator">+=</span> value；<span class="token punctuation">}</span>）；<span class="token comment">//将每个值累加到sum上</span>
sum<span class="token comment">//=&gt;15</span>
<span class="token comment">//每个数组元素的值自加1</span>
data<span class="token punctuation">.</span>forEach（<span class="token keyword">function</span>（v，i，a）<span class="token punctuation">{</span> a<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token operator">=</span>v<span class="token operator">+</span><span class="token number">1</span>；<span class="token punctuation">}</span>）；
data<span class="token comment">//=&gt;[2，3，4，5，6]</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br></div></div><p>  注意，forEach（）无法在所有元素都传递给调用的函数之前终止遍历。也就是说，没有像 for 循环中使用的相应的 break 语句。如果要提前终止，必须把 forEach（）方法放在一个 try 块中，并能抛出一个异常。如果 forEach（）调用的函数抛出 foreach.break 异常，循环会提前终止：</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token keyword">function</span> <span class="token function">foreach</span><span class="token punctuation">(</span><span class="token parameter">a<span class="token punctuation">,</span>f<span class="token punctuation">,</span>t</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
    <span class="token keyword">try</span> <span class="token punctuation">{</span>a<span class="token punctuation">.</span><span class="token function">forEach</span><span class="token punctuation">(</span>f<span class="token punctuation">,</span>t<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token punctuation">}</span>
    <span class="token keyword">catch</span><span class="token punctuation">(</span>e<span class="token punctuation">)</span><span class="token punctuation">{</span>
        <span class="token keyword">if</span><span class="token punctuation">(</span>e<span class="token operator">===</span>foreach<span class="token punctuation">.</span> <span class="token keyword">break</span><span class="token punctuation">)</span> <span class="token keyword">return</span><span class="token punctuation">;</span>
        <span class="token keyword">else</span> <span class="token keyword">throw</span> e<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
foreach<span class="token punctuation">.</span>break<span class="token operator">=</span><span class="token keyword">new</span> <span class="token class-name">Error</span><span class="token punctuation">(</span><span class="token string">&quot;StopIteration&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br></div></div><h4 id="map-遍历并返回新数组"><a href="#map-遍历并返回新数组" aria-hidden="true" class="header-anchor">#</a> map()遍历并返回新数组</h4> <p>  map（）方法将调用的数组的每个元素传递给指定的函数，并返回一个数组，它包含该函数的返回值，例加。</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code>a<span class="token operator">=</span><span class="token punctuation">[</span><span class="token number">1</span>，<span class="token number">2</span>，<span class="token number">3</span><span class="token punctuation">]</span>；
b<span class="token operator">=</span>a<span class="token punctuation">.</span>map（<span class="token keyword">function</span>（x）<span class="token punctuation">{</span><span class="token keyword">return</span> x<span class="token operator">*</span>x；<span class="token punctuation">}</span>）；<span class="token comment">//b是[1，4，9]</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><p>  传递给 map（）的函数的调用方式和传递给 forEach（）的函数的调用方式一样。但传递给 map（）的函数应该有返回值。<br>
  注意，map（）返回的是新数组：它不修改调用的数组。如果是稀疏数组，返回的也是相同方式的稀疏数组：它具有相同的长度，相同的缺失元素。</p> <h4 id="filter-遍历并返回运算为-true-的元素数组"><a href="#filter-遍历并返回运算为-true-的元素数组" aria-hidden="true" class="header-anchor">#</a> filter()遍历并返回运算为 true 的元素数组</h4> <p>  fliter（）方法返回的数组元素是调用的数组的一个子集。传递的函数是用来逻辑判定的：该函数返回 true 或 false。调用判定函数就像调用 forEach（）和 map（）一样。如果返回值为 true 或能转化为 true 的值，那么传递给判定函数的元素就是这个子集的成员，它将被添加到一个作为返回值的数组中。</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code>a<span class="token operator">=</span><span class="token punctuation">[</span><span class="token number">5</span>，<span class="token number">4</span>，<span class="token number">3</span>，<span class="token number">2</span>，<span class="token number">1</span><span class="token punctuation">]</span>；
smallvalues <span class="token operator">=</span>a<span class="token punctuation">.</span>filter（<span class="token keyword">function</span>（x）<span class="token punctuation">{</span> <span class="token keyword">return</span> x<span class="token operator">&lt;</span><span class="token number">3</span><span class="token punctuation">}</span>）；<span class="token comment">//[2，1]</span>
everyother<span class="token operator">=</span>a<span class="token punctuation">.</span>filter（<span class="token keyword">function</span>（x，i）<span class="token punctuation">{</span><span class="token keyword">return</span> i<span class="token operator">%</span><span class="token number">2</span><span class="token operator">==</span><span class="token number">0</span> <span class="token punctuation">}</span>）；<span class="token comment">//[5，3，1]</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div><p>  注意，filter（）会跳过稀疏数组中缺少的元素，它的返回数组总是稠密的。为了压缩稀疏数组的空缺，代码如下：</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token keyword">var</span> dense<span class="token operator">=</span>sparse<span class="token punctuation">.</span>filter（<span class="token keyword">function</span>（）<span class="token punctuation">{</span> <span class="token keyword">return</span> <span class="token boolean">true</span>；<span class="token punctuation">}</span>）；
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><p>  甚至，压缩空缺并删除 undefined 和 null 元素，可以这样使用 filter（）：</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code>a<span class="token operator">=</span>a<span class="token punctuation">.</span>filter（<span class="token keyword">function</span>（x）<span class="token punctuation">{</span><span class="token keyword">return</span> x<span class="token operator">!==</span><span class="token keyword">undefined</span> <span class="token number">8</span><span class="token operator">&amp;</span> x<span class="token operator">!=</span><span class="token keyword">null</span>；<span class="token punctuation">}</span>）；
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><h4 id="every-和-some-遍历并判断元素返回-true-或-false"><a href="#every-和-some-遍历并判断元素返回-true-或-false" aria-hidden="true" class="header-anchor">#</a> every()和 some()遍历并判断元素返回 true 或 false</h4> <p>  every（）和 some（）方法是数组的逻辑判定：它们对数组元素应用指定的函数进行判定，返回 true 或 false。<br>
  every（）方法就像数学中的“针对所有”的量词 V：当且仅当针对数组中的所有元素调用判定函数都返回 true，它才返回 true：</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code>a<span class="token operator">=</span><span class="token punctuation">[</span><span class="token number">1</span>，<span class="token number">2</span>，<span class="token number">3</span>，<span class="token number">4</span>，<span class="token number">5</span><span class="token punctuation">]</span>；
a<span class="token punctuation">.</span>every（<span class="token keyword">function</span>（x）<span class="token punctuation">{</span><span class="token keyword">return</span> x<span class="token operator">&lt;</span><span class="token number">10</span>；<span class="token punctuation">}</span>）<span class="token comment">//=&gt;true：所有的值&lt;10</span>
a<span class="token punctuation">.</span>every（<span class="token keyword">function</span>（x）<span class="token punctuation">{</span> returnx<span class="token operator">%</span><span class="token number">2</span><span class="token operator">===</span><span class="token number">0</span>；<span class="token punctuation">}</span>）<span class="token comment">//=&gt;false：不是所有的值都是偶数</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div><p>  some（）方法就像数学中的“存在”的量词：当数组中至少有一个元素调用判定函数返回 true，它就返回 true；并且当且仅当数值中的所有元素调用判定函数都返回 false，它才返回 false：</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code>a<span class="token operator">=</span><span class="token punctuation">[</span><span class="token number">1</span>，<span class="token number">2</span>，<span class="token number">3</span>，<span class="token number">4</span>，<span class="token number">5</span><span class="token punctuation">]</span>；
a<span class="token punctuation">.</span>some（<span class="token keyword">function</span>（x）<span class="token punctuation">{</span> <span class="token keyword">return</span> x<span class="token operator">%</span><span class="token number">2</span><span class="token operator">===</span><span class="token number">0</span>；<span class="token punctuation">}</span>）<span class="token comment">//=&gt;true:a含有偶数值</span>
a<span class="token punctuation">.</span>some（isNaN）<span class="token comment">//=&gt;false:a不包含非数值元素</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div><p>  注意，一旦 every（）和 some（）确认该返回什么值它们就会停止遍历数组元素。some（）在判定函数第一次返回 true 后就返回 true，但如果判定函数一直返回 false，它将会遍历整个数组。every（）恰好相反：它在判定函数第一次返回 false 后就返回 false，但如果判定函数一直返回 true，它将会遍历整个数组。<br>
  注意，根据数学上的惯例，在空数组上调用时，every（）返回 true，some（）返回 false。</p> <h4 id="reduce-和-reduceright-遍历元素进行组合并生成单个值"><a href="#reduce-和-reduceright-遍历元素进行组合并生成单个值" aria-hidden="true" class="header-anchor">#</a> reduce()和 reduceRight()遍历元素进行组合并生成单个值</h4> <h5 id="reduce"><a href="#reduce" aria-hidden="true" class="header-anchor">#</a> reduce()</h5> <p>  reduce（）和 reduceRight（）方法使用指定的函数将数组元素进行组合，生成单个值。这在函数式编程中是常见的操作，也可以称为“注入”和“折叠”。举例说明它是如何工作的：</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token keyword">var</span> a<span class="token operator">=</span><span class="token punctuation">[</span><span class="token number">1</span>，<span class="token number">2</span>，<span class="token number">3</span>，<span class="token number">4</span>，<span class="token number">5</span><span class="token punctuation">]</span>
<span class="token keyword">var</span> sum<span class="token operator">=</span>a<span class="token punctuation">.</span>reduce（<span class="token keyword">function</span>（x，y）<span class="token punctuation">{</span> <span class="token keyword">return</span> x<span class="token operator">+</span>y<span class="token punctuation">}</span>，<span class="token number">0</span>）；<span class="token comment">//数组求和</span>
<span class="token keyword">var</span> product<span class="token operator">=</span>a<span class="token punctuation">.</span>reduce（<span class="token keyword">function</span>（x，y）<span class="token punctuation">{</span><span class="token keyword">return</span> x<span class="token operator">*</span>y<span class="token punctuation">}</span>，<span class="token number">1</span>）；<span class="token comment">//数组求积</span>
<span class="token keyword">var</span> max<span class="token operator">=</span>a<span class="token punctuation">.</span>reduce（<span class="token keyword">function</span>（x，y）<span class="token punctuation">{</span> <span class="token keyword">return</span>（x<span class="token operator">&gt;</span>y）<span class="token operator">?</span>x<span class="token punctuation">:</span>y；<span class="token punctuation">}</span>）；<span class="token comment">//求最大值</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br></div></div><p>  reduce（）需要两个参数。第一个是执行化简操作的函数。化简函数的任务就是用某种方法把两个值组合或化简为一个值，并返回化简后的值。在上述例子中，函数通过加法、乘法或取最大值的方法组合两个值。第二个（可选）的参数是一个传递给函数的初始值。<br>
  可能已经注意到了，上面第三次调用 reduce（）时只有一个参数：没有指定初始值。当不指定初始值调用 reduce（）时，它将使用数组的第一个元素作为其初始值。这意味着第一次调用化简函数就使用了第一个和第二个数组元素作为其第一个和第二个参数。在上面求和与求积的例子中，可以省略初始值参数。<br>
  reduce（）使用的函数与 forEach（）和 map（）使用的函数不同。比较熟悉的是，数组元素、元素的索引和数组本身将作为第 2~4 个参数传递给函数。第一个参数是到目前为止的化简操作累积的结果。<br>
  第一次调用函数时，第一个参数是一个初始值，它就是传递给 reduce（）的第二个参数。在接下来的调用中，这个值就是上一次化简函数的返回值。<br>
  在空数组上，不带初始值参数调用 reduce（）将导致类型错误异常。如果调用它的时候只有一个值——数组只有一个元素并且没有指定初始值，或者有一个空数组并且指定一个初始值—reduce（）只是简单地返回那个值而不会调用化简函数。</p> <h5 id="reduceright"><a href="#reduceright" aria-hidden="true" class="header-anchor">#</a> reduceRight()</h5> <p>  reduceRight（）的工作原理和 reduce（）一样，不同的是它按照数组索引从高到低（从右到左）处理数组，而不是从低到高。如果化简操作的优先顺序是从右到左，你可能想使用它，例如：</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token keyword">var</span> a<span class="token operator">=</span><span class="token punctuation">[</span><span class="token number">2</span>，<span class="token number">3</span>，<span class="token number">4</span><span class="token punctuation">]</span>
<span class="token comment">//计算2 ^（3^4）。乘方操作的优先顺序是从右到左</span>
<span class="token keyword">var</span> big<span class="token operator">=</span>a<span class="token punctuation">.</span>reduceRight（<span class="token keyword">function</span>（accumulator，value）<span class="token punctuation">{</span>
                        <span class="token keyword">return</span> Math<span class="token punctuation">.</span>pow（value，accumulator）；
                    <span class="token punctuation">}</span>）；
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br></div></div><p>  注意，reduce（）和 reduceRight（）都能接收一个可选的参数，它指定了化简函数调用时的 this 关键字的值。可选的初始值参数仍然需要占一个位置。如果想让化简函数作为一个特殊对象的方法调用，请参看 Function.bind（）方法。<br>
  为了简单起见，到目前位置所展示的例子都是数值的，但数学计算不是 reduce（）和 reduceRight（）的唯一意图。</p> <h4 id="indexof-和-lastindexof-搜索数组返回索引"><a href="#indexof-和-lastindexof-搜索数组返回索引" aria-hidden="true" class="header-anchor">#</a> indexOf()和 lastindexOf()搜索数组返回索引</h4> <p>  indexOf（）和 lastIndexOf（）搜索整个数组中具有给定值的元素，返回找到的第一个元素的索引或者如果没有找到就返回-1。indexOf（）从头至尾搜索，而 lastIndexOf（）则反向搜索。</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code>a<span class="token operator">=</span><span class="token punctuation">[</span>o，<span class="token number">1</span>，<span class="token number">2</span>，<span class="token number">1</span>，<span class="token number">0</span><span class="token punctuation">]</span>；
a<span class="token punctuation">.</span>indexOf（<span class="token number">1</span>）<span class="token comment">//=&gt;1：a[1]是1</span>
a<span class="token punctuation">.</span>lastIndexOf（<span class="token number">1</span>）<span class="token comment">//=&gt;3：a[3]是1</span>
a<span class="token punctuation">.</span>indexOf（<span class="token number">3</span>）<span class="token comment">//=&gt;-1：没有值为3的元素</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br></div></div><p>  不同于本节描述的其他方法，indexOf（）和 1astIndexOf（）方法不接收一个函数作为其参数。第一个参数是需要搜索的值，第二个参数是可选的：它指定数组中的一个索引，从那里开始搜索。如果省略该参数，indexOf（）从头开始搜索，而 lastIndexOf（）从末尾开始搜索。第二个参数也可以是负数，它代表相对数组末尾的偏移量，例如，-1 指定数组的最后一个元素。<br>
  如下函数在一个数组中搜索指定的值并返回包含所有匹配的数组索引的一个数组。它展示了如何运用 indexof（）的第二个参数来查找除了第一个以外匹配的值。</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token comment">//在数组中查找所有出现的x，并返回一个包含匹配索引的数组</span>
<span class="token keyword">function</span> findall（a，x）<span class="token punctuation">{</span>
    <span class="token keyword">var</span> results<span class="token operator">=</span><span class="token punctuation">[</span><span class="token punctuation">]</span>，<span class="token comment">//将会返回的数组</span>
    len<span class="token operator">=</span>a<span class="token punctuation">.</span>length，<span class="token comment">//待搜索数组的长度</span>
    pos<span class="token operator">=</span><span class="token number">0</span>；<span class="token comment">//开始搜索的位置</span>
    <span class="token keyword">while</span>（pos<span class="token operator">&lt;</span>len）<span class="token punctuation">{</span><span class="token comment">//循环搜索多个元素..</span>
        pos<span class="token operator">=</span>a<span class="token punctuation">.</span>indexoOf（x，pos）；<span class="token comment">//搜索</span>
    <span class="token keyword">if</span>（pos<span class="token operator">===</span><span class="token operator">-</span><span class="token number">1</span>）<span class="token keyword">break</span>；<span class="token comment">//未找到，就完成搜索</span>
        results<span class="token punctuation">.</span>push（pos）；<span class="token comment">//否则，在数组中存储索引</span>
        pos<span class="token operator">=</span>pos<span class="token operator">+</span><span class="token number">1</span>；<span class="token comment">//并从下一个位置开始搜索</span>
        <span class="token keyword">return</span> results；<span class="token comment">//返回包含索引的数组</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br></div></div><h2 id="数组类型-掌握"><a href="#数组类型-掌握" aria-hidden="true" class="header-anchor">#</a> 数组类型(掌握)</h2> <p>  我们在本章中到处都可以看见数组是具有特殊行为的对象。给定一个未知的对象，判定它是否为数组通常非常有用。在 ECMAScript5 中，可以使用 Array.isArray（）函数来做这件事情：</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code>Array<span class="token punctuation">.</span><span class="token function">isArray</span><span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">//=&gt;true</span>
Array<span class="token punctuation">.</span><span class="token function">isArray</span><span class="token punctuation">(</span><span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">//=&gt;false</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><p>  instanceof 操作符只能用于简单的情形：使用 instanceof 的问题是在 Web 浏览器中有可能有多个窗口或窗体（frame）存在。每个窗口都有自己的 JavaScript 环境，有自己的全局对象。并且，每个全局对象有自己的一组构造函数。因此一个窗体中的对象将不可能是另外窗体中的构造函数的实例。窗体之间的混淆不常发生，但这个问题足已证明 instanceof 操作符不能视为一个可靠的数组检测方法。</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token punctuation">[</span><span class="token punctuation">]</span> <span class="token keyword">instanceof</span>
  <span class="token class-name">Array</span><span class="token punctuation">(</span>
    <span class="token comment">//=&gt;true</span>
    <span class="token punctuation">{</span><span class="token punctuation">}</span>
  <span class="token punctuation">)</span> <span class="token keyword">instanceof</span>
  <span class="token class-name">Array</span><span class="token punctuation">;</span> <span class="token comment">//=&gt;false</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br></div></div><p>  解决方案是检查对象的类属性。对数组而言该属性的值总是“Array”，因此在 ECMAScript3 中 isArray（）函数的代码可以这样书写：</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token keyword">var</span> isArray<span class="token operator">=</span>Function<span class="token punctuation">.</span>isArray <span class="token number">1</span><span class="token operator">|</span> <span class="token keyword">function</span>（o）<span class="token punctuation">{</span>
    <span class="token keyword">return</span> <span class="token keyword">typeof</span> o<span class="token operator">===</span><span class="token string">&quot;object&quot;</span><span class="token number">8</span><span class="token operator">&amp;</span>
    <span class="token class-name">Object</span><span class="token punctuation">.</span>prototype<span class="token punctuation">.</span>tostring<span class="token punctuation">.</span>call（o）<span class="token operator">===</span><span class="token string">&quot;[Object Array]&quot;</span>；
<span class="token punctuation">}</span>；
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br></div></div><p>  实际上，此处类属性的检测就是 ECMAScript5 中 Array.isArray（）函数所做的事情。获得对象类属性的技术使用了 Object.prototype.toString（）方法。</p> <h2 id="类数组对象-掌握"><a href="#类数组对象-掌握" aria-hidden="true" class="header-anchor">#</a> 类数组对象(掌握)</h2> <p>  一种常常完全合理的看法把拥有一个数值 length 属性和对应非负整数属性的对象看做一种类型的数组。实践中这些“类数组”对象实际上偶尔出现，虽然不能在它们之上直接调用数组方法或者期望 length 属性有什么特殊的行为，但是仍然可以用针对真正数组遍历的代码来遍历它们。结论就是很多数组算法针对类数组对象工作得很好，就像针对真正的数组一样。如果算法把数组看成只读的或者如果它们至少保持数组长度不变，也尤其是这种情况。<br>
  以下代码为一个常规对象增加了一些属性使其变成类数组对象，然后遍历生成的伪数组的“元素”：</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token keyword">var</span> a<span class="token operator">=</span><span class="token punctuation">{</span><span class="token punctuation">}</span>；<span class="token comment">//从一个常规空对象开始</span>
<span class="token comment">//添加一些属性，称为“类数组&quot;</span>
<span class="token keyword">var</span> i<span class="token operator">=</span><span class="token number">0</span>；
<span class="token keyword">while</span>（i<span class="token operator">&lt;</span><span class="token number">10</span>）<span class="token punctuation">{</span>
    a<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token operator">=</span>i<span class="token operator">*</span>i；
    i<span class="token operator">++</span>；
<span class="token punctuation">}</span>
a<span class="token punctuation">.</span>length<span class="token operator">=</span>i；
<span class="token comment">//现在，当做真正的数组遍历它</span>
<span class="token keyword">var</span> total<span class="token operator">=</span><span class="token number">0</span>；
<span class="token keyword">for</span>（varj<span class="token operator">=</span><span class="token number">0</span>；j<span class="token operator">&lt;</span>a<span class="token punctuation">.</span>length；j<span class="token operator">++</span>）
    total<span class="token operator">+=</span>a<span class="token punctuation">[</span>j<span class="token punctuation">]</span>；
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br></div></div><p>  Arguments 对象就是一个类数组对象。在客户端 JavaScript 中，一些 DOM 方法（如 document.getElementsByTagName（））也返回类数组对象。下面有一个函数可以用来检测类数组对象：</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token comment">//判定。是否是一个类数组对象</span>
<span class="token comment">//字符串和函数有1ength属性，但是它们</span>
<span class="token comment">//可以用typeof检测将其排除。在客户端Java5cript中，DOM文本节点</span>
<span class="token comment">//也有1ength属性，需要用额外判断o.nodeType！=3将其排除</span>
<span class="token keyword">function</span> isArraylike（o）<span class="token punctuation">{</span>
    <span class="token keyword">if</span>（o8<span class="token operator">&amp;</span><span class="token comment">//o非null、undefined等</span>
        <span class="token keyword">typeof</span> o<span class="token operator">===</span><span class="token string">&quot;object&quot;</span><span class="token number">8</span><span class="token operator">&amp;</span><span class="token comment">//o是对象isFinite（o.length）8&amp;//o.1ength是有限数值</span>
        o<span class="token punctuation">.</span><span class="token number">1</span>ength<span class="token operator">&gt;=</span><span class="token number">0</span><span class="token operator">&amp;&amp;</span><span class="token comment">//o.length为非负值</span>
        o<span class="token punctuation">.</span><span class="token number">1</span>ength<span class="token operator">===</span>Math<span class="token punctuation">.</span>floor（o<span class="token punctuation">.</span><span class="token number">1</span>ength）<span class="token operator">&amp;&amp;</span><span class="token comment">//o.1ength是整数</span>
        o<span class="token punctuation">.</span>length<span class="token operator">&lt;</span><span class="token number">4294967296</span>）<span class="token comment">//o.length&lt;232</span>
        <span class="token keyword">return</span> <span class="token boolean">true</span>；<span class="token comment">//o是类数组对象</span>
    <span class="token keyword">else</span>
        <span class="token keyword">return</span> <span class="token boolean">false</span>；<span class="token comment">//否则它不是</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br></div></div><p>  类似上述的类数组对象的检测方法针对字符串常常返回 false——它们通常最好当做字符串处理，而非数组。<br>
  JavaScript 数组方法是特意定义为通用的，因此它们不仅应用在真正的数组而且在类数组对象上都能正确工作。在 ECMAScript5 中，所有的数组方法都是通用的。在 ECMAScript3 中，除了 toString（）和 tolocaleString（）以外的所有方法也是通用的。（concat（）方法是一个特例：虽然可以用在类数组对象上，但它没有将那个对象扩充进返回的数组中。）既然类数组对象没有继承自 Array.prototype，那就不能在它们上面直接调用数组方法。尽管如此，可以间接地使用 Function.cal1 方法调用：</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token keyword">var</span> a<span class="token operator">=</span><span class="token punctuation">{</span><span class="token string">&quot;o&quot;</span>：<span class="token string">&quot;a&quot;</span>，“<span class="token number">1</span><span class="token string">&quot;：&quot;</span>b<span class="token string">&quot;，&quot;</span><span class="token number">2</span><span class="token string">&quot;：&quot;</span>c&quot;，length：<span class="token number">3</span><span class="token punctuation">}</span>；<span class="token comment">//类数组对象</span>
<span class="token class-name">Array</span><span class="token punctuation">.</span>prototype<span class="token punctuation">.</span>join<span class="token punctuation">.</span>call（a，<span class="token string">&quot;+&quot;</span>）<span class="token comment">//=&gt;&quot;a+b+c&quot;</span>
<span class="token class-name">Array</span><span class="token punctuation">.</span>prototype<span class="token punctuation">.</span>slice<span class="token punctuation">.</span>call（a，<span class="token number">0</span>）<span class="token comment">//=&gt;[&quot;a&quot;，&quot;b&quot;，&quot;c&quot;]：真正数组的副本</span>
<span class="token class-name">Array</span><span class="token punctuation">.</span>prototype<span class="token punctuation">.</span>map<span class="token punctuation">.</span>call（a，<span class="token keyword">function</span>（x）<span class="token punctuation">{</span>
                    <span class="token keyword">return</span> x<span class="token punctuation">.</span>toUpperCase（）；
<span class="token punctuation">}</span>）<span class="token comment">//=&gt;[&quot;A&quot;，&quot;B&quot;，&quot;C&quot;]：</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br></div></div><p>  ECMAScript 5 数组方法是在 Firefox1.5 中引入的。由于它们的写法的一般性，Firefox 还将这些方法的版本在 Array 构造函数上直接定义为函数。使用这些方法定义的版本，上述例子就可以这样重写：</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token keyword">var</span> a<span class="token operator">=</span><span class="token punctuation">{</span><span class="token string">&quot;o&quot;</span>：<span class="token string">&quot;a&quot;</span>，“<span class="token number">1</span><span class="token string">&quot;：&quot;</span>b<span class="token string">&quot;，“2&quot;</span>：<span class="token string">&quot;c&quot;</span>，length：<span class="token number">3</span><span class="token punctuation">}</span>；<span class="token comment">//类数组对象</span>
Array<span class="token punctuation">.</span>join（a，<span class="token string">&quot;+&quot;</span>）
Array<span class="token punctuation">.</span>slice（a，<span class="token number">0</span>）
Array<span class="token punctuation">.</span>map（a，<span class="token keyword">function</span>（x）<span class="token punctuation">{</span> <span class="token keyword">return</span> x<span class="token punctuation">.</span>toUpperCase（）；<span class="token punctuation">}</span>）
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br></div></div><p>  当用在类数组对象上时，数组方法的静态函数版本非常有用。但既然它们不是标准的，不能期望它们在所有的浏览器中都有定义。可以这样书写代码来保证使用它们之前是存在的：</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code>Array<span class="token punctuation">.</span>join <span class="token operator">=</span>
  Array<span class="token punctuation">.</span>join <span class="token operator">||</span>
  <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">a<span class="token punctuation">,</span> sep</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> <span class="token class-name">Array</span><span class="token punctuation">.</span>prototype<span class="token punctuation">.</span><span class="token function">join</span><span class="token punctuation">.</span><span class="token function">call</span><span class="token punctuation">(</span>a<span class="token punctuation">,</span> sep<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span><span class="token punctuation">;</span>
Array<span class="token punctuation">.</span>slice <span class="token operator">=</span>
  Array<span class="token punctuation">.</span>slice <span class="token operator">||</span>
  <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">a<span class="token punctuation">,</span> <span class="token keyword">from</span><span class="token punctuation">,</span> to</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> <span class="token class-name">Array</span><span class="token punctuation">.</span>prototype<span class="token punctuation">.</span><span class="token function">slice</span><span class="token punctuation">.</span><span class="token function">call</span><span class="token punctuation">(</span>a<span class="token punctuation">,</span> <span class="token keyword">from</span><span class="token punctuation">,</span> to<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span><span class="token punctuation">;</span>
Array<span class="token punctuation">.</span>map <span class="token operator">=</span>
  Array<span class="token punctuation">.</span>map <span class="token operator">||</span>
  <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">a<span class="token punctuation">,</span> f<span class="token punctuation">,</span> thisArg</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> <span class="token class-name">Array</span><span class="token punctuation">.</span>prototype<span class="token punctuation">.</span><span class="token function">map</span><span class="token punctuation">.</span><span class="token function">call</span><span class="token punctuation">(</span>a<span class="token punctuation">,</span> f<span class="token punctuation">,</span> thisArg<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br></div></div><h2 id="作为数组的字符串-掌握"><a href="#作为数组的字符串-掌握" aria-hidden="true" class="header-anchor">#</a> 作为数组的字符串(掌握)</h2> <p>  在 ECMAScript5（在众多最近的浏览器实现——包括 IE8——早于 ECMAScript 5）中，字符串的行为类似于只读的数组。除了用 charAt（）方法来访问单个的字符以外，还可以使用方括号：</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token keyword">var</span> s <span class="token operator">=</span> <span class="token string">'test'</span><span class="token punctuation">;</span>
s<span class="token punctuation">.</span><span class="token function">charAt</span><span class="token punctuation">(</span>o<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">//=&gt;&quot;t&quot;</span>
s<span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">;</span> <span class="token comment">//=&gt;&quot;e&quot;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div><p>  可索引的字符串的最大的好处就是简单，用方括号代替了 charAt（）调用，这样更加简洁、可读并且可能更高效。不仅如此，字符串的行为类似于数组的事实使得通用的数组方法可以应用到字符串上。例如：</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code>s<span class="token operator">=</span><span class="token string">&quot;JavaScript&quot;</span>
<span class="token class-name">Array</span><span class="token punctuation">.</span>prototype<span class="token punctuation">.</span>join<span class="token punctuation">.</span>call（s，<span class="token string">&quot;&quot;</span>）<span class="token comment">//=）&quot;JavaScript&quot;</span>
<span class="token class-name">Array</span><span class="token punctuation">.</span>prototype<span class="token punctuation">.</span>filter<span class="token punctuation">.</span>call（s，<span class="token comment">//过滤字符串中的字符</span>
    <span class="token keyword">function</span>（x）<span class="token punctuation">{</span>
        <span class="token keyword">return</span> x<span class="token punctuation">.</span>match（<span class="token operator">/</span><span class="token punctuation">[</span><span class="token operator">^</span>aeiou<span class="token punctuation">]</span><span class="token operator">/</span>）；<span class="token comment">//只匹配非元音字母</span>
    <span class="token punctuation">}</span>）<span class="token punctuation">.</span>join（<span class="token string">&quot;&quot;</span>）<span class="token comment">//=）&quot;jvScrpt&quot;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br></div></div><p>  请记住，字符串是不可变值，故当把它们作为数组看待时，它们是只读的。如 push（）、sort（）、reverse（）和 splice（）等数组方法会修改数组，它们在字符串上是无效的。不仅如此，使用数组方法来修改字符串会导致错误：出错的时候没有提示。</p></div> <span id="footerPost" data-v-aa2eb952></span></div> <div id="post-toc" class="post-toc el-col el-col-6" data-v-aa2eb952><h4 class="catalog-title" data-v-aa2eb952>TOC</h4> <div class="catalog-body" data-v-aa2eb952><ul id="catalog-list" class="catalog-list" data-v-aa2eb952></ul></div></div></div> <div class="post-nav el-row is-justify-space-around el-row--flex" data-v-aa2eb952><div class="post-prev el-col el-col-7" data-v-aa2eb952><div data-v-aa2eb952><a href="/posts/%E3%80%90%E8%AF%BB%E4%B9%A6%E7%AC%94%E8%AE%B0%E3%80%91%E3%80%8AJavaScript%E6%9D%83%E5%A8%81%E6%8C%87%E5%8D%97%E3%80%8B%E7%AC%AC8%E7%AB%A0%E5%87%BD%E6%95%B0.html" data-v-aa2eb952><i class="el-icon-arrow-left" data-v-aa2eb952></i> Prev
        </a> <p class="nav-title" data-v-aa2eb952>【读书笔记】《JavaScript权威指南》第8章函数</p></div></div> <div class="post-next el-col el-col-7 el-col-lg-pull-5" data-v-aa2eb952><div data-v-aa2eb952><a href="/posts/%E3%80%90%E8%AF%BB%E4%B9%A6%E7%AC%94%E8%AE%B0%E3%80%91%E3%80%8AJavaScript%E6%9D%83%E5%A8%81%E6%8C%87%E5%8D%97%E3%80%8B%E7%AC%AC6%E7%AB%A0%E5%AF%B9%E8%B1%A1.html" data-v-aa2eb952>
          Next
          <i class="el-icon-arrow-right" data-v-aa2eb952></i></a> <p class="nav-title" data-v-aa2eb952>【读书笔记】《JavaScript权威指南》第6章对象</p></div></div></div> <div class="el-row is-justify-center el-row--flex" data-v-aa2eb952><div class="el-col el-col-23" data-v-aa2eb952></div></div> <span data-v-1ba756dd data-v-aa2eb952><button type="button" class="el-button toc-btn el-button--primary is-circle" data-v-1ba756dd><!----><!----><span><i class="iconfont icon-service-directory" data-v-1ba756dd></i></span></button> <button type="button" class="el-button gotop-btn el-button--primary is-circle" data-v-1ba756dd><!----><!----><span><i class="el-icon-arrow-up" data-v-1ba756dd></i></span></button></span></div></main></section> <button type="button" class="el-button gotop-btn el-button--primary is-circle" style="display:none;" data-v-db63bc4e data-v-3431ceb9><!----><!----><span><i class="el-icon-arrow-up" data-v-db63bc4e></i></span></button></section> <footer class="el-footer container-footer" style="height:60px;" data-v-6660fccd data-v-3431ceb9><div class="footer-warp el-row is-justify-center is-align-center el-row--flex footerMargin" data-v-6660fccd><div class="footer-top el-col el-col-24" data-v-6660fccd><p class="ellipsis" data-v-6660fccd><span data-v-6660fccd>
          博客内容遵循
          <a rel="license" href="https://creativecommons.org/licenses/by-nc-sa/4.0/deed.zh" data-v-6660fccd>知识共享 署名 - 非商业性 - 相同方式共享 4.0 国际协议</a></span></p></div> <div class="footer-bottom el-col el-col-24" data-v-6660fccd><p class="ellipsis" data-v-6660fccd><span data-v-6660fccd><span data-v-6660fccd>
            zhhlwd的个人博客 © 2018-08 ~ 2019-06
          </span></span> <span data-v-6660fccd>
          Power by
          <a href="https://vuepress.vuejs.org/zh/" target="_blank" data-v-6660fccd>VuePress</a> Theme
          <a href="https://github.com/zhhlwd/vuepress-theme-indigo-material" target="_blank" data-v-6660fccd>indigo material</a></span></p></div></div></footer> <div class="overlay" data-v-3431ceb9></div></div><div class="global-ui"></div></div>
    <script src="/assets/js/app.39e00e98.js" defer></script><script src="/assets/js/1.c0224360.js" defer></script><script src="/assets/js/15.f0ca96b2.js" defer></script><script src="/assets/js/5.b07737de.js" defer></script><script src="/assets/js/7.9893d61a.js" defer></script><script src="/assets/js/10.9c509957.js" defer></script><script src="/assets/js/6.57699fa9.js" defer></script><script src="/assets/js/60.0babdfb8.js" defer></script><script src="/assets/js/14.0e97f0ce.js" defer></script><script src="/assets/js/16.9fb85302.js" defer></script>
  </body>
</html>
